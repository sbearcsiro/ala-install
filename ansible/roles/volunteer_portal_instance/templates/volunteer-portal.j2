<VirtualHost *:80>
	ServerAdmin support@ala.org.au
	ServerName {{ hostname }}

	DocumentRoot /srv/volunteer/www
	<Directory />
		Options FollowSymLinks
		AllowOverride None
	</Directory>
	<Directory /srv/volunteer/www/>
		Options {% if is_vagrant %}+Indexes {% endif %}FollowSymLinks MultiViews
		AllowOverride None
		Order allow,deny
		allow from all
	</Directory>
	<Location /data/volunteer/config >
		Order allow,deny
		deny from all
	</Location>

{% if ansible_os_family == "Debian" %}
	ErrorLog ${APACHE_LOG_DIR}/error.log

	# Possible values include: debug, info, notice, warn, error, crit,
	# alert, emerg.
	LogLevel warn

	CustomLog ${APACHE_LOG_DIR}/access.log combined
{% endif %}


	ProxyPreserveHost On
	ProxyVia full

	ProxyPass        /data !
{% if tomcat_ajp == true %}
	ProxyPass        {{volunteer_context_path}}     ajp://127.0.0.1:{{tomcat_ajp_port}}{{volunteer_context_path}}
	ProxyPassReverse {{volunteer_context_path}}     http://127.0.0.1:{{tomcat_ajp_port}}{{volunteer_context_path}}
{% else %}
	ProxyPass        {{volunteer_context_path}}     http://127.0.0.1:{{tomcat_http_port}}{{volunteer_context_path}}
	ProxyPassReverse {{volunteer_context_path}}     http://127.0.0.1:{{tomcat_http_port}}{{volunteer_context_path}}
{% endif %}


</VirtualHost>